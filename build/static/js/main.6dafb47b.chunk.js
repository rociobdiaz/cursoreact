(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},58:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},80:function(e,t,c){},81:function(e,t,c){"use strict";c.r(t);var a=c(4),n=c.n(a),i=c(43),r=c.n(i),o=(c(54),c(55),c(56),c(15)),s=c(44),l=c(49),j=c(13),d=c(3),b=Object(a.createContext)(),m=JSON.parse(localStorage.getItem("carrito"))||[],u=function(e){var t=e.children,c=Object(a.useState)(m),n=Object(j.a)(c,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){localStorage.setItem("carrito",JSON.stringify(i))}),[i]),Object(d.jsx)(b.Provider,{value:{carrito:i,addToCart:function(e){r([].concat(Object(l.a)(i),[e]))},removeItem:function(e){var t=i.filter((function(t){return t.id!==e}));r(t)},calcularCantidad:function(){return i.reduce((function(e,t){return e+t.cantidad}),0)},vaciarCarrito:function(){r([])},isInCart:function(e){return i.some((function(t){return t.id===e}))},calcularTotal:function(){return i.reduce((function(e,t){return e+t.cantidad*t.price}),0)}},children:t})},O=function(){var e=Object(a.useContext)(b).calcularCantidad;return Object(d.jsxs)("div",{style:{visibility:0===e()?"hidden":"visible"},children:[Object(d.jsx)(s.a,{className:"widget"}),Object(d.jsxs)("span",{children:[" ",e()," "]})]})},h=(c(58),function(e){e.logo;return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsxs)("a",{href:"/",children:[Object(d.jsx)("img",{src:"data:image/png;base64,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",alt:"logo libreria"}),"Librer\xeda Pencil Case"]}),Object(d.jsx)("div",{children:Object(d.jsxs)("nav",{children:[Object(d.jsx)(o.c,{activeClassName:"activeLink",exact:!0,to:"/",children:"Inicio"}),Object(d.jsx)(o.c,{activeClassName:"activeLink",exact:!0,to:"/productos/libreria",children:"Libreria"}),Object(d.jsx)(o.c,{activeClassName:"activeLink",exact:!0,to:"/productos/papelera",children:"Papelera"}),Object(d.jsx)(o.c,{activeClassName:"activeLink",exact:!0,to:"/contacto",children:"Contacto"}),Object(d.jsx)(o.b,{to:"/cart",children:Object(d.jsx)(O,{})})]})})]})}),x=c(7),p=c(34),g=(c(37),p.a.initializeApp({apiKey:"AIzaSyAR-q3VR7o5j2zmwF8J1lCSMcw_1idXKac",authDomain:"libreriaecommerce.firebaseapp.com",projectId:"libreriaecommerce",storageBucket:"libreriaecommerce.appspot.com",messagingSenderId:"200800661025",appId:"1:200800661025:web:4212e309e1da552bf1fd60"})),f=function(){return p.a.firestore(g)},v=c(83),C=c(84),A=(c(40),function(e){var t=e.id,c=e.name,a=e.price,n=e.img,i=e.description;return Object(d.jsxs)(v.a,{style:{width:"18rem"},className:"m-3 card",children:[Object(d.jsx)(v.a.Img,{variant:"top",src:n}),Object(d.jsxs)(v.a.Body,{children:[Object(d.jsx)(v.a.Title,{children:c}),Object(d.jsx)(v.a.Text,{children:i}),Object(d.jsxs)(v.a.Text,{children:["Precio: $",a]}),Object(d.jsx)(o.b,{to:"/detail/".concat(t),children:Object(d.jsx)(C.a,{variant:"dark",children:"Ver Producto"})})]})]})}),N=function(e){var t=e.productos,c=void 0===t?[]:t;return Object(d.jsxs)("div",{className:"box__container",children:[Object(d.jsx)("h2",{children:"Nuestros productos"}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"box__container--row",children:c.map((function(e){return Object(a.createElement)(A,Object(x.a)(Object(x.a)({},e),{},{key:e.id}))}))})]})},y=c(8),E=Object(a.createContext)(),I=function(e){var t=e.children,c=Object(a.useState)(!1),n=Object(j.a)(c,2),i=n[0],r=n[1];return Object(d.jsx)(E.Provider,{value:{loading:i,setLoading:r},children:t})},w=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),c=t[0],n=t[1],i=Object(a.useContext)(E),r=i.loading,o=i.setLoading,s=Object(y.h)().categoryId;return Object(a.useEffect)((function(){o(!0);var e=f();(s?e.collection("Productos").where("category","==",s):e.collection("Productos")).get().then((function(e){var t=e.docs.map((function(e){return Object(x.a)({id:e.id},e.data())}));n(t)})).catch((function(e){return console.log(e)})).finally((function(){o(!1),console.log("Fin del llamado")}))}),[s,o]),Object(d.jsx)("section",{className:"container my-5",children:r?Object(d.jsx)("h2",{children:"Cargando..."}):Object(d.jsx)(N,{productos:c})})},k=(c(63),function(e){var t=e.cantidad,c=e.modify,a=e.max;return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){t>0&&c(t-1)},className:"btn ".concat(0===t?"btn-danger desactivado":"btn-primary"),children:"-"}),Object(d.jsx)("span",{className:"mx-3",children:t}),Object(d.jsx)("button",{onClick:function(){t<a&&c(t+1)},className:"btn ".concat(t===a?"btn-danger desactivado":"btn-primary"),children:"+"})]})}),P=function(e){var t=e.id,c=e.name,n=e.price,i=e.img,r=e.description,s=e.category,l=e.stock,m=Object(y.g)().goBack,u=Object(a.useContext)(b),O=u.addToCart,h=u.isInCart,x=Object(a.useState)(0),p=Object(j.a)(x,2),g=p[0],f=p[1],v={btnAgregar:h(t)?"btn btn-danger":"btn btn-success",btnTerminar:"btn btn-success ".concat(!h(t)&&"desactivado")};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"box__detail container",children:[Object(d.jsx)("div",{className:"box__detail--img",children:Object(d.jsx)("img",{src:i,alt:c})}),Object(d.jsxs)("div",{className:"box__detail--description",children:[Object(d.jsx)("h2",{children:c}),Object(d.jsx)("p",{children:r}),Object(d.jsxs)("h4",{children:["Precio: $",n]}),Object(d.jsxs)("div",{className:h(t)&&"desactivado",children:[Object(d.jsx)(k,{cantidad:g,modify:f,max:l}),Object(d.jsxs)("div",{className:"box__detail--buttons",children:[Object(d.jsx)("button",{disabled:0===g,className:v.btnAgregar,onClick:function(){g>0&&O({id:t,img:i,name:c,price:n,category:s,cantidad:g})},children:"Agregar"}),Object(d.jsx)(o.b,{to:"/cart",className:v.btnTerminar,children:"Terminar mi compra"})]})]})]})]}),Object(d.jsx)("hr",{}),Object(d.jsx)("button",{className:"go-back btn btn-primary",onClick:function(){return m()},children:"Volver"})]})},T=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),c=t[0],n=t[1],i=Object(a.useContext)(E),r=i.loading,o=i.setLoading,s=Object(y.h)().itemId;return Object(a.useEffect)((function(){o(!0),f().collection("Productos").doc(s).get().then((function(e){n(Object(x.a)({id:e.id},e.data()))})).catch((function(e){return console.log(e)})).finally((function(){o(!1)}))}),[s,o]),Object(d.jsx)("div",{children:r?Object(d.jsx)("h2",{children:"Cargando..."}):Object(d.jsx)(P,Object(x.a)({},c))})},S=c(47),F=(c(64),function(){var e=Object(a.useContext)(b),t=e.carrito,c=e.vaciarCarrito,n=e.removeItem,i=e.calcularTotal;return Object(d.jsx)("div",{className:"container my-5",children:0===t.length?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"No hay productos agregados"}),Object(d.jsx)(o.b,{to:"/",className:"btn btn-success",children:"Ir a comprar"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Resumen de compra"}),Object(d.jsx)("hr",{}),t.map((function(e){return Object(d.jsxs)("div",{className:"cart__view",children:[Object(d.jsx)("div",{className:"cart__view--img",children:Object(d.jsx)("img",{src:e.img,alt:e.name})}),Object(d.jsx)("h4",{children:e.name}),Object(d.jsxs)("p",{children:["Cantidad: ",e.cantidad]}),Object(d.jsxs)("p",{children:["Precio: ",e.price*e.cantidad]}),Object(d.jsx)("button",{className:"btn btn-danger",onClick:function(){return n(e.id)},children:Object(d.jsx)(S.a,{})})]})})),Object(d.jsx)("hr",{}),Object(d.jsxs)("h3",{className:"my-3",children:["Precio total: $",i()]}),Object(d.jsx)("button",{className:"btn btn-danger",onClick:c,children:"Vaciar carrito"}),Object(d.jsx)(o.b,{to:"/checkout",className:"btn btn-success mx-3",children:"Terminar mi compra"})]})})}),L=c(24),B=c(48),M=c(27),D=c.n(M),Q=(c(80),function(){return Object(d.jsx)("div",{className:"loader",children:Object(d.jsx)("h2",{children:"Cargando..."})})}),q=function(){var e=Object(a.useContext)(E),t=e.loading,c=e.setLoading,n=Object(a.useContext)(b),i=n.carrito,r=n.calcularTotal,o=n.vaciarCarrito,s=Object(a.useState)({nombre:"",apellido:"",email:"",tel:""}),l=Object(j.a)(s,2),m=l[0],u=l[1],O=function(e){u(Object(x.a)(Object(x.a)({},m),{},Object(L.a)({},e.target.name,e.target.value)))};return Object(d.jsxs)(d.Fragment,{children:[0===i.length&&Object(d.jsx)(y.a,{to:"/"}),t&&Object(d.jsx)(Q,{}),Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Complete sus datos"}),Object(d.jsx)("hr",{}),Object(d.jsx)("div",{className:"container my-5",children:Object(d.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),m.nombre.length<3)alert("Nombre inv\xe1lido");else if(m.apellido.length<3)alert("Apellido inv\xe1lido");else if(m.email.length<3)alert("Email inv\xe1lido");else if(m.tel.length<7)alert("Tel\xe9fono inv\xe1lido");else{var t={buyer:Object(x.a)({},m),items:i.map((function(e){return{id:e.id,precio:e.price,cantidad:e.cantidad}})),total:r(),date:B.a.firestore.Timestamp.fromDate(new Date)},a=f(),n=a.collection("orders");c(!0),n.add(t).then((function(e){D.a.fire({icon:"success",title:"Su compra fue registrada!",text:"Guarde su n\xfamero de orden: ".concat(e.id),willClose:function(){o()}})})).catch((function(e){D.a.fire({icon:"error",title:"Error inesperado",text:"".concat(e)})})).finally((function(){c(!1)})),i.forEach((function(e){var t=a.collection("Productos").doc(e.id);t.get().then((function(c){c.data().stock>=e.cantidad?t.update({stock:c.data().stock-e.cantidad}):alert("No hay stock de "+c.data().name)}))}))}},children:[Object(d.jsx)("h2",{children:"Formulario"}),Object(d.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Nombre",name:"nombre",value:m.nombre,onChange:O}),0===m.nombre.length&&Object(d.jsx)("small",{children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Apellido",name:"apellido",value:m.apellido,onChange:O}),0===m.apellido.length&&Object(d.jsx)("small",{children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"email",placeholder:"Email",name:"email",value:m.email,onChange:O}),0===m.email.length&&Object(d.jsx)("small",{children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"tel",placeholder:"Tel\xe9fono",name:"tel",value:m.tel,onChange:O}),0===m.tel.length&&Object(d.jsx)("small",{children:"Este campo es obligatorio"}),Object(d.jsx)("button",{className:"btn btn-success",type:"submit",disabled:t,children:"Finalizar"})]})})]})]})},G=function(){var e=Object(a.useState)({nombre:"",apellido:"",email:"",mensaje:""}),t=Object(j.a)(e,2),c=t[0],n=t[1],i=function(e){n(Object(x.a)(Object(x.a)({},c),{},Object(L.a)({},e.target.name,e.target.value)))};return Object(d.jsx)("div",{className:"container my-5",children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log(c),D.a.fire({icon:"success",title:"Su consulta fue registrada"})},children:[Object(d.jsx)("h2",{children:"Formulario"}),Object(d.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Nombre",name:"nombre",value:c.nombre,onChange:i}),0===c.nombre.length&&Object(d.jsx)("small",{children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Apellido",name:"apellido",value:c.apellido,onChange:i}),0===c.apellido.length&&Object(d.jsx)("small",{children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"email",placeholder:"Email",name:"email",value:c.email,onChange:i}),0===c.email.length&&Object(d.jsx)("small",{children:"Este campo es obligatorio"}),Object(d.jsx)("input",{className:"form-control my-2",type:"text",placeholder:"Mensaje",name:"mensaje",value:c.mensaje,onChange:i}),0===c.mensaje.length&&Object(d.jsx)("small",{children:"Este campo es obligatorio"}),Object(d.jsx)("br",{}),Object(d.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Enviar"})]})})},J=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("footer",{class:"bg-dark text-center text-white",children:Object(d.jsxs)("div",{class:"text-center p-3",children:["\xa9 2021 Copyright:",Object(d.jsx)("h6",{class:"text-white",children:" Roc\xedo D\xedaz"})]})})})};var W=function(){return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(I,{children:Object(d.jsx)(u,{children:Object(d.jsxs)(o.a,{children:[Object(d.jsx)(h,{logo:"Libreria"}),Object(d.jsxs)(y.d,{children:[Object(d.jsx)(y.b,{exact:!0,path:"/",children:Object(d.jsx)(w,{})}),Object(d.jsx)(y.b,{exact:!0,path:"/productos/:categoryId",children:Object(d.jsx)(w,{})}),Object(d.jsx)(y.b,{exact:!0,path:"/detail/:itemId",children:Object(d.jsx)(T,{})}),Object(d.jsx)(y.b,{exact:!0,path:"/contacto",children:Object(d.jsx)(G,{})}),Object(d.jsx)(y.b,{exact:!0,path:"/cart",children:Object(d.jsx)(F,{})}),Object(d.jsx)(y.b,{exact:!0,path:"/checkout",children:Object(d.jsx)(q,{})}),Object(d.jsx)(y.b,{path:"*",children:Object(d.jsx)(y.a,{to:"/"})})]}),Object(d.jsx)(J,{})]})})})})},z=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,85)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),i(e),r(e)}))};r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(W,{})}),document.getElementById("root")),z()}},[[81,1,2]]]);
//# sourceMappingURL=main.6dafb47b.chunk.js.map